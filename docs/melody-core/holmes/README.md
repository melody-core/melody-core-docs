# @melody-core/holmes
> ğŸ•µï¸ ç¦å°”æ‘©æ–¯ï¼ä¸ºæ‚¨çš„é¡¹ç›®æä¾›å®‰å…¨æ‰«ææœåŠ¡ï¼
## 1. ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨
å®‰è£…
```shell
 # æˆ‘ä»¬æ›´æœŸæœ›æ‚¨å¯ä»¥é€šè¿‡ melodyæ¥å®‰è£…å®ƒã€‚
   yarn global add @melody-core/melody-cli
 # å®‰è£…  
   melody i @melody-core/holmes
  # ä½¿ç”¨-ç›®æ ‡é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è¿è¡Œ
  melody holmes check
```


å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…å’Œä½¿ç”¨å®ƒã€‚
```shell
   yarn global add  @melody-core/holmes
```
ä½¿ç”¨
```shell
# æ‚¨å¯ä»¥åœ¨ä»»æ„å‰ç«¯é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è¿è¡Œ
holmes check 
```


## 2. ä½œä¸ºä¾èµ–åŒ…ä½¿ç”¨
å®‰è£…
```shell
   yarn add  @melody-core/holmes
```
ä½¿ç”¨
```node
   const PackageSafeWorker  = require('@melody-core/holmes');
   const packageSafeWorker = new PackageSafeWorker({
       proPath   //å‚æ•°ï¼Œè¦æ£€æµ‹é¡¹ç›®çš„ç»å¯¹è·¯å¾„
   });
   const result = await PackageSafeWorker.run();
   console.log('é¡¹ç›®ä¾èµ–åŒ…å®‰å…¨æ£€æµ‹ç»“æœï¼š', result)
```



## åŸç†ä¸è®¾è®¡

### æ³¨æ„ç‚¹

ç”±äºæ¯ä¸ªä¸šåŠ¡ç»„é¡¹ç›®çš„ä¾èµ–å®‰è£…æ–¹å¼ä¸ä¸€æ ·ï¼Œä¼šå¸¦æ¥ä¸€å®šçš„å·®å¼‚ï¼š

- yarn ç”Ÿæˆ yarn.lock
- npm ç”Ÿæˆ package-lock.json
- cnpm ä¸ä¼šç”Ÿæˆé”æ–‡ä»¶

å› æ­¤å…³é”®ç‚¹åœ¨äºå¦‚ä½•å…¼å®¹è¿™äº›å®‰è£…æ–¹å¼æ‰€å¸¦æ¥çš„å·®å¼‚æ€§é—®é¢˜ï¼š

1. æ–‡ä»¶å‚æ•°ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆæ¯ä¸€ç§æœ€åŒ¹é…çš„æ‰«ææ–¹æ¡ˆéƒ½ä¸ä¸€è‡´
2. æ¯ç§æ‰«ææ–¹æ¡ˆçš„è¾“å‡ºä¸ä¸€è‡´ï¼›

### å…¼å®¹æ€§æ–¹æ¡ˆ

#### æ‰«ææ–¹å¼å…¼å®¹

> Yarn/npm/retirejs.js

- yarn audit
- npm audit
- retirejs.js ç”¨æ¥è§£å†³æ— é”æ–‡ä»¶çš„æƒ…å†µ

å› æ­¤ï¼Œholmeså…¶å®å°±æ˜¯ä¼šå…ˆæ£€æµ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹æ˜¯å¦å«æœ‰é”æ–‡ä»¶ï¼Œå¦‚æœå«æœ‰ï¼Œåˆ™ç”¨å¯¹åº”çš„yarn/np auditæ¥è·å–æ£€æµ‹æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šä½¿ç”¨retirejsæ¥å…¼å®¹æ— é”æ–‡ä»¶ä¸‹çš„æ£€æµ‹(æ ¹æ®package.jsoné‡Œçš„ä¾èµ–é¡¹)ã€‚